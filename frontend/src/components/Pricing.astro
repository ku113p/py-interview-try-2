---
interface Tier {
  name: string;
  price: number | null;
  priceLabel: string;
  description: string;
  features: readonly string[];
  cta: string;
  highlighted: boolean;
  badge?: string;
}

interface Props {
  heading: string;
  tiers: readonly Tier[];
  paymentNote: string;
}

const { heading, tiers, paymentNote } = Astro.props;
---

<section class="bg-sand-50 py-24">
  <div class="mx-auto max-w-6xl px-4">
    <h2
      class="reveal text-center font-display text-3xl font-bold text-ink-900 sm:text-4xl"
    >
      {heading}
    </h2>
    <div
      class:list={[
        'mx-auto mt-14 grid max-w-4xl items-start gap-8',
        tiers.length === 2 ? 'sm:grid-cols-2' : 'sm:grid-cols-2 lg:grid-cols-3',
      ]}
    >
      {
        tiers.map((tier, i) => (
          <div
            class:list={[
              'reveal relative rounded-2xl border p-8 transition-all duration-300',
              tier.highlighted
                ? 'border-gold-400 bg-white shadow-[0_0_40px_rgba(232,196,104,0.15)]'
                : 'border-sand-200 bg-white hover:border-sand-300',
            ]}
            style={`transition-delay: ${i * 0.1}s`}
          >
            {tier.badge && (
              <span class="absolute -top-3 right-6 rounded-full bg-gold-400 px-3 py-1 text-xs font-bold uppercase tracking-wider text-obsidian-950">
                {tier.badge}
              </span>
            )}
            <h3 class="font-display text-xl font-bold text-ink-900">
              {tier.name}
            </h3>
            <p class="mt-3 font-display text-3xl font-extrabold text-ink-900 sm:text-4xl">
              {tier.priceLabel}
            </p>
            <p class="mt-2 text-sm text-ink-500">{tier.description}</p>
            <ul class="mt-7 space-y-3">
              {tier.features.map((feat) => (
                <li class="flex items-start gap-2.5 text-sm text-ink-700">
                  <svg
                    class="mt-0.5 h-5 w-5 shrink-0 text-gold-500"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M5 13l4 4L19 7"
                    />
                  </svg>
                  {feat}
                </li>
              ))}
            </ul>
            <a
              href="#signup"
              class:list={[
                'mt-8 block rounded-full px-6 py-3 text-center text-sm font-semibold transition-all duration-300',
                tier.highlighted
                  ? 'bg-gold-400 text-obsidian-950 hover:bg-gold-300 hover:shadow-[0_0_20px_rgba(232,196,104,0.3)]'
                  : 'border border-ink-300 text-ink-700 hover:border-gold-500 hover:text-gold-600',
              ]}
              data-event={tier.highlighted ? 'Lifetime Intent' : undefined}
            >
              {tier.cta}
            </a>
          </div>
        ))
      }
    </div>
    <p class="mt-10 text-center text-sm text-ink-400">
      {paymentNote}
    </p>
  </div>
</section>
